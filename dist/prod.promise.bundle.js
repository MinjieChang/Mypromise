!function(n){"function"==typeof define&&define.amd?define(n):n()}(function(){"use strict";function a(n,t){for(var e=0;e<t.length;e++){var a=t[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,a.key,a)}}function n(n,t,e){return t&&a(n.prototype,t),e&&a(n,e),n}var c={PENDING:"PENDING",FULFILED:"FULFILED",REJECT:"REJECT"},t=function(){function u(n){var a=this;!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),this.state=c.PENDING,this.resolveCallBacks=[],this.rejectCallBacks=[];function t(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];a.state===c.PENDING&&(a.state=c.REJECT,a.rejectCallBack&&a.rejectCallBack.apply(a,t),setTimeout(function(){a.rejectCallBacks.forEach(function(n){"function"==typeof n&&n.apply(void 0,t)})}))}try{n(function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];a.state===c.PENDING&&(a.state=c.FULFILED,a.resolveCallBack&&a.resolveCallBack.apply(a,t),setTimeout(function(){a.resolveCallBacks.forEach(function(n){"function"==typeof n&&n.apply(void 0,t)})}))},t)}catch(n){t(n)}}return n(u,null,[{key:"allTwo",value:function(n){var c=n.length,o=0,r=new Array(c);return new u(function(e,a){n.forEach(function(n,t){n.resolveCallBack=function(n){o++,r[t]=n,o===c&&e(r)},n.rejectCallBack=function(n){a(n)}})})}},{key:"all",value:function(n){var c=n.length,o=0,r=new Array(c);return new u(function(e,a){n.forEach(function(n,t){n.then(function(n){o++,r[t]=n,o===c&&e(r)}).catch(function(n){a(n)})})})}},{key:"race",value:function(n){return new u(function(t,e){n.forEach(function(n){n.then(function(n){t(n)}).catch(function(n){e(n)})})})}},{key:"resolve",value:function(t){return new u(function(n){n(t)})}},{key:"reject",value:function(e){return new u(function(n,t){t(e)})}}]),n(u,[{key:"then",value:function(a,c){var n=this;return a=a||function(n){return n},c=c||function(n){return n},new u(function(t,e){n.resolveCallBacks.push(function(){try{var n=a.apply(void 0,arguments);n instanceof u?n.then(t,e):t(n)}catch(n){e(n)}}),n.rejectCallBacks.push(function(){try{var n=c.apply(void 0,arguments);n instanceof u?n.then(t,e):e(n)}catch(n){e(n)}})})}},{key:"catch",value:function(a){var n=this;return new u(function(t,e){n.resolveCallBacks.push(function(){t.apply(void 0,arguments)}),n.rejectCallBacks.push(function(){try{var n=a.apply(void 0,arguments);n instanceof u?n.then(t,e):e(n)}catch(n){e(n)}})})}},{key:"finally",value:function(a){var c=this;return new u(function(t,e){function n(){var n=a();n instanceof u?n.then(t,e):e(n)}c.resolveCallBacks.push(n),c.rejectCallBacks.push(n)})}}]),u}();module.exports=t});
