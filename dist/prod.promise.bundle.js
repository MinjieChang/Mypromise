!function(n){"function"==typeof define&&define.amd?define(n):n()}(function(){"use strict";function a(n,e){for(var t=0;t<e.length;t++){var a=e[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,a.key,a)}}function n(n,e,t){return e&&a(n.prototype,e),t&&a(n,t),n}var c={PENDING:"PENDING",FULFILED:"FULFILED",REJECT:"REJECT"},e=function(){function u(n){var a=this;!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),this.state=c.PENDING,this.resolveCallBacks=[],this.rejectCallBacks=[];function e(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];a.state===c.PENDING&&(a.state=c.REJECT,a.rejectCallBack&&a.rejectCallBack.apply(a,e),setTimeout(function(){a.rejectCallBacks.forEach(function(n){"function"==typeof n&&n.apply(void 0,e)})}))}try{n(function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];a.state===c.PENDING&&(a.state=c.FULFILED,a.resolveCallBack&&a.resolveCallBack.apply(a,e),setTimeout(function(){a.resolveCallBacks.forEach(function(n){"function"==typeof n&&n.apply(void 0,e)})}))},e)}catch(n){e(n)}}return n(u,null,[{key:"allTwo",value:function(n){var c=n.length,o=0,r=new Array(c);return new u(function(t,a){n.forEach(function(n,e){n.resolveCallBack=function(n){o++,r[e]=n,o===c&&t(r)},n.rejectCallBack=function(n){a(n)}})})}},{key:"all",value:function(n){var c=n.length,o=0,r=new Array(c);return new u(function(t,a){n.forEach(function(n,e){n.then(function(n){o++,r[e]=n,o===c&&t(r)}).catch(function(n){a(n)})})})}},{key:"race",value:function(n){return new u(function(e,t){n.forEach(function(n){n.then(function(n){e(n)}).catch(function(n){t(n)})})})}},{key:"resolve",value:function(e){return new u(function(n){n(e)})}},{key:"reject",value:function(t){return new u(function(n,e){e(t)})}}]),n(u,[{key:"then",value:function(a,c){var n=this;return a=a||function(n){return n},c=c||function(n){return n},new u(function(e,t){n.resolveCallBacks.push(function(){try{var n=a.apply(void 0,arguments);n instanceof u?n.then(e,t):e(n)}catch(n){t(n)}}),n.rejectCallBacks.push(function(){try{var n=c.apply(void 0,arguments);n instanceof u&&n.then(e,t)}catch(n){t(n)}})})}},{key:"catch",value:function(a){var n=this;return new u(function(e,t){n.rejectCallBacks.push(function(){var n=a.apply(void 0,arguments);n instanceof u?n.then(e,t):t(n)})})}},{key:"finally",value:function(a){var c=this;return new u(function(e,t){function n(){var n=a();n instanceof u?n.then(e,t):t(n)}c.resolveCallBacks.push(n),c.rejectCallBacks.push(n)})}}]),u}();module.exports=e});
