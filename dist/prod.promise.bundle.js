!function(n){"function"==typeof define&&define.amd?define(n):n()}(function(){"use strict";function r(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function n(n,t,e){return t&&r(n.prototype,t),e&&r(n,e),n}var c={PENDING:"PENDING",FULFILED:"FULFILED",REJECT:"REJECT"},t=function(){function u(n){var r=this;!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),this.state=c.PENDING,this.resolveCallBacks=[],this.rejectCallBacks=[];function t(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];r.state===c.PENDING&&(r.state=c.REJECT,r.rejectCallBack&&r.rejectCallBack.apply(r,t),setTimeout(function(){r.rejectCallBacks.forEach(function(n){"function"==typeof n&&n.apply(void 0,t)})}))}try{n(function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];r.state===c.PENDING&&(r.state=c.FULFILED,r.resolveCallBack&&r.resolveCallBack.apply(r,t),setTimeout(function(){r.resolveCallBacks.forEach(function(n){"function"==typeof n&&n.apply(void 0,t)})}))},t)}catch(n){t(n)}}return n(u,null,[{key:"allTwo",value:function(n){var c=n.length,o=0,a=new Array(c);return new u(function(e,r){n.forEach(function(n,t){n.resolveCallBack=function(n){o++,a[t]=n,o===c&&e(a)},n.rejectCallBack=function(n){r(n)}})})}},{key:"all",value:function(n){var c=n.length,o=0,a=new Array(c);return new u(function(e,r){n.forEach(function(n,t){n.then(function(n){o++,a[t]=n,o===c&&e(a)}).catch(function(n){r(n)})})})}},{key:"race",value:function(n){return new u(function(t,e){n.forEach(function(n){n.then(function(n){t(n)}).catch(function(n){e(n)})})})}},{key:"resolve",value:function(t){return new u(function(n){n(t)})}},{key:"reject",value:function(e){return new u(function(n,t){t(e)})}}]),n(u,[{key:"then",value:function(r,c){var n=this;return r=r||function(n){return n},c=c||function(n){return n},new u(function(t,e){n.resolveCallBacks.push(function(){try{var n=r.apply(void 0,arguments);n instanceof u?n.then(t,e):t(n)}catch(n){e(n)}}),n.rejectCallBacks.push(function(){try{var n=c.apply(void 0,arguments);n instanceof u?n.then(t,e):e(n)}catch(n){e(n)}})})}},{key:"catch",value:function(n,e){return e=e||n,this.then(function(n){return u.resolve(n)},function(n){try{var t=e(n);return u.resolve(t)}catch(n){return u.resolve(n)}})}},{key:"finally",value:function(n,t){return t=t||n,this.then(function(n){return u.resolve(t()).then(function(){return n})},function(n){return u.resolve(t()).then(function(){throw n})})}}]),u}();module.exports=t});
